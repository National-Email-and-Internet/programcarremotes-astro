---
// Search box component for Year/Make/Model selection
// TODO: Populate options from content collections

const years = Array.from({ length: 30 }, (_, i) => 2024 - i);

const makes = [
  'Acura', 'Audi', 'BMW', 'Buick', 'Cadillac', 'Chevrolet', 'Chrysler',
  'Dodge', 'Ford', 'GMC', 'Honda', 'Hyundai', 'Infiniti', 'Jeep', 'Kia',
  'Lexus', 'Lincoln', 'Mazda', 'Mercedes-Benz', 'Mitsubishi', 'Nissan',
  'Pontiac', 'Ram', 'Subaru', 'Toyota', 'Volkswagen', 'Volvo'
];
---

<div class="bg-white rounded-2xl p-6 shadow-2xl max-w-2xl mx-auto">
  <form id="search-form" action="/search/" method="get">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
      
      <!-- Year -->
      <div>
        <label for="year" class="block text-left text-sm font-medium text-gray-600 mb-2">
          Year
        </label>
        <select 
          id="year" 
          name="year"
          class="w-full px-4 py-3 rounded-lg border border-gray-200 text-gray-800 bg-gray-50 focus:ring-2 focus:ring-accent focus:border-accent transition"
        >
          <option value="">Select Year</option>
          {years.map(year => (
            <option value={year}>{year}</option>
          ))}
        </select>
      </div>
      
      <!-- Make -->
      <div>
        <label for="make" class="block text-left text-sm font-medium text-gray-600 mb-2">
          Make
        </label>
        <select 
          id="make" 
          name="make"
          class="w-full px-4 py-3 rounded-lg border border-gray-200 text-gray-800 bg-gray-50 focus:ring-2 focus:ring-accent focus:border-accent transition"
        >
          <option value="">Select Make</option>
          {makes.map(make => (
            <option value={make.toLowerCase()}>{make}</option>
          ))}
        </select>
      </div>
      
      <!-- Model -->
      <div>
        <label for="model" class="block text-left text-sm font-medium text-gray-600 mb-2">
          Model
        </label>
        <select 
          id="model" 
          name="model"
          class="w-full px-4 py-3 rounded-lg border border-gray-200 text-gray-800 bg-gray-50 focus:ring-2 focus:ring-accent focus:border-accent transition"
          disabled
        >
          <option value="">Select Make first</option>
        </select>
      </div>
    </div>
    
    <button 
      type="submit"
      class="w-full bg-accent hover:bg-green-600 text-white font-semibold py-4 rounded-xl transition flex items-center justify-center gap-2 text-lg disabled:opacity-50 disabled:cursor-not-allowed"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
      Find My Instructions
    </button>
  </form>
</div>

<script>
  // TODO: Add dynamic model loading based on make selection
  const makeSelect = document.getElementById('make') as HTMLSelectElement;
  const modelSelect = document.getElementById('model') as HTMLSelectElement;
  
  makeSelect?.addEventListener('change', () => {
    if (makeSelect.value) {
      modelSelect.disabled = false;
      modelSelect.innerHTML = '<option value="">Select Model</option><option value="all">All Models</option>';
      // TODO: Fetch models for selected make
    } else {
      modelSelect.disabled = true;
      modelSelect.innerHTML = '<option value="">Select Make first</option>';
    }
  });
</script>
